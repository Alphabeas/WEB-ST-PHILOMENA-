<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Staff Login - Experiment Upload System</title>
<link rel="icon" href="pic.png" type="image/png">
<link rel="stylesheet" href="styles.css">
</head>

<body>

<div class="container">
<div class="auth-container">

<div class="auth-box">
<h1 class="logo">ExperimentHub</h1>
<p class="subtitle">Staff Portal</p>

<!-- LOGIN -->
<div id="login-form" class="form-container active">
<h2>Login</h2>

<form onsubmit="handleLogin(event)">
<div class="form-group">
<label>Email</label>
<input type="email" id="login-username" placeholder="Enter your email" required>
</div>

<div class="form-group">
<label>Password</label>
<input type="password" id="login-password" placeholder="Enter your password" required>
</div>

<button type="submit" class="btn btn-primary">Login</button>
</form>

<p class="toggle-text">
Don't have an account?
<a href="#" onclick="toggleForms(event)">Sign up here</a>
</p>

<div id="login-message" class="message"></div>
</div>

<!-- REGISTER -->
<div id="register-form" class="form-container">
<h2>Create Account</h2>

<form onsubmit="handleRegister(event)">

<div class="form-group">
<label>Email</label>
<input type="email" id="register-email" placeholder="Enter your email" required>
</div>

<div class="form-group">
<label>Password</label>
<input type="password" id="register-password" placeholder="Create password" required>
</div>

<div class="form-group">
<label>Confirm Password</label>
<input type="password" id="register-confirm-password" required>
</div>

<button type="submit" class="btn btn-primary">Sign Up</button>
</form>

<p class="toggle-text">
Already have an account?
<a href="#" onclick="toggleForms(event)">Login here</a>
</p>

<div id="register-message" class="message"></div>
</div>

</div>

<div class="info-box">
<h3>Welcome to ExperimentHub</h3>
<p>Share your innovative experiment ideas with your team. Upload, collaborate, and bring your research to life.</p>
<ul class="features">
<li>✓ Secure login authentication</li>
<li>✓ Easy file uploads</li>
<li>✓ Organize your ideas</li>
<li>✓ Track submissions</li>
</ul>
</div>

</div>
</div>

<!-- Toggle Form Script -->
<script>
function toggleForms(event){
event.preventDefault();
document.getElementById("login-form").classList.toggle("active");
document.getElementById("register-form").classList.toggle("active");
}
</script>

<!-- FIREBASE LOGIN SYSTEM -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";

const firebaseConfig = {
apiKey: "AIzaSyA7VRNc6emQtTtiFkxveDDKGtrs4RwIxII",
authDomain: "st-philomena-login.firebaseapp.com",
projectId: "st-philomena-login",
storageBucket: "st-philomena-login.firebasestorage.app",
messagingSenderId: "274541567875",
appId: "1:274541567875:web:c6457dc48400293bbe60b6"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

window.handleLogin = async function(event){
event.preventDefault();

const email = document.getElementById("login-username").value;
const password = document.getElementById("login-password").value;
const msg = document.getElementById("login-message");

try{
await signInWithEmailAndPassword(auth,email,password);
msg.className="message success";
msg.textContent="Login successful!";
setTimeout(()=>window.location.href="dashboard.html",1500);
}catch(err){
msg.className="message error";
msg.textContent=err.message;
}
}

window.handleRegister = async function(event){
event.preventDefault();

const email=document.getElementById("register-email").value;
const password=document.getElementById("register-password").value;
const confirm=document.getElementById("register-confirm-password").value;
const msg=document.getElementById("register-message");

if(password!==confirm){
msg.className="message error";
msg.textContent="Passwords do not match";
return;
}

try{
await createUserWithEmailAndPassword(auth,email,password);
msg.className="message success";
msg.textContent="Account created successfully!";
}catch(err){
msg.className="message error";
msg.textContent=err.message;
}
}
</script>

</body>
</html>